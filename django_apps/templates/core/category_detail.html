{% extends "core/base.html" %}

{% block content %}
<div class="flex flex-col items-center w-full overflow-x-auto">
  <div class="flex flex-wrap self-start justify-center pt-3 mb-4 text-lg gap-2">
    <a href="{% url "core:category-detail" name=category.name %}" class="px-4 py-3 bg-white border rounded hover:bg-slate-100">
      <span class="text-xl">{{ category.emoji }}</span>
      <span class="uppercase">{{ category.name }}</span>
    </a>
    <span class="px-4 py-3 ml-2 bg-white border rounded">
      <span class="text-xl">ðŸ“Š</span>
      <span>{{ page_obj.paginator.count }} matching repositor{{ page_obj.paginator.count | pluralize:"ies" }}</span>
    </span>
  </div>
  <table class="table w-full border table-compact">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Stars</th>
      </tr>
    </thead>
    <tbody>
      {% for repo in page_obj %}

      <tr class="hover">
        <td>
          <a href="{{ repo.url }}">
            {{ repo.full_name }}
          </a>
        </td>
        <td>
          <a href="{{ repo.url }}">
            {{ repo.description | truncatechars:50 }}
          </a>
        </td>
        <td>
          <a href="{{ repo.url }}">
            {{ repo.stars }}
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
    <div class="mt-2 mb-4 btn-group">
      {% if page_obj.has_previous %}
      <a href="?page=1"><button class="btn">1</button></a>
      <a href="?page={{ page_obj.previous_page_number }}"><button class="btn">{{ page_obj.previous_page_number }}</button></a>
      {% endif %}

      <a href="?page={{ page_obj.number }}"><button class="btn btn-active">{{ page_obj.number }}</button></a>

      {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}"><button class="btn">{{ page_obj.next_page_number }}</button></a>
      {% endif %}
    </div>
</div>
{% endblock %}
