{% extends "core/base.html" %}

{% block content %}
<div class="flex flex-col w-full">
  <div class="flex gap-2 mt-5 mb-5 lg:text-lg">
    <a href="{% url "core:category-detail" name=category.name %}" class="p-4 bg-white border rounded hover:bg-slate-100">
      <span>{{ category.emoji }}</span>
      <span>{{ category.name|upper }}</span>
    </a>
    <span class="p-4 bg-white border rounded">
      <span>{{ page_obj.paginator.count }} matching repositor{{ page_obj.paginator.count | pluralize:"ies" }}</span>
    </span>
  </div>
  <table class="table border leading-6">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Name</th>
        <th>Description</th>
        <th>Stars</th>
      </tr>
    </thead>
    <tbody>
      {% for repo in page_obj %}

      <tr class="hover">
        {% with url=repo.github_url %}
        <td>
          <a class="font-bold" href="{{ url }}" target="_blank">
            {{ page_obj.start_index|add:forloop.counter0 }}
          </a>
        </td>
        <td>
          <a href="{{ url }}" target="_blank">
            {{ repo.full_name }}
          </a>
        </td>
        <td>
          <a href="{{ url }}" target="_blank">
            {{ repo.truncated_description }}
          </a>
        </td>
        <td>
          <a href="{{ url }}" target="_blank">
            {{ repo.stars }}
          </a>
        </td>
        {% endwith %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% include "core/components/pagination.html" %}
</div>
{% endblock %}
